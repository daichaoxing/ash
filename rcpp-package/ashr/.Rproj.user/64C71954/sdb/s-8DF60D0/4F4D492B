{
    "contents" : "install.packages(\"../../rcpp-package/ashr_0.1.tar.gz\",repos=NULL,type=\"source\")\nlibrary(ashr)\n\n# simulate n beta-hat values, nnull under the null with altmean and altsd\n# being the mean and sd of beta under the alternative\nsimdata = function(n, nnull, altmean, altsd, betasd) {\n        null = c(rep(1, nnull), rep(0, n - nnull))\n            beta = c(rep(0, nnull), rnorm(n - nnull, altmean, altsd))\n            betahat = rnorm(n, beta, betasd)\n            return(list(null = null, beta = beta, betahat = betahat, betasd = betasd))\n    }\n\nset.seed(100)\nss = simdata(10000, 8000, 0, 2, 1)\n\n# do profiling\ncxx=TRUE\noutfile=\"ash.cxx.out\"\nRprof(outfile)\nsystem.time(beta.ash.cxx <- ash(ss$betahat, ss$betasd, prior = \"uniform\", cxx =cxx))\nRprof(NULL)\n\ncxx=FALSE\noutfile=\"ash.out\"\nRprof(outfile)\nsystem.time(beta.ash <- ash(ss$betahat, ss$betasd, prior = \"uniform\", cxx =cxx))\nRprof(NULL)\n\n\n# check that return identical values (up to machine error)\nall.equal(beta.ash$PosteriorMean, beta.ash.cxx$PosteriorMean)\nall.equal(beta.ash$qvalue, beta.ash.cxx$qvalue)\nall.equal(beta.ash$PositiveProb, beta.ash.cxx$PositiveProb)\n\n#to see profiling output run this in the terminal\n#R CMD Rprof ash.out > ash.out.txt\n#R CMD Rprof ash.cxx.out > ash.cxx.out.txt\n\n# repeat using halfuniform\ncxx=TRUE\noutfile=\"ash.cxx.out\"\nRprof(outfile)\nsystem.time(beta.ash.cxx <- ash(ss$betahat, ss$betasd, prior = \"uniform\", mixcompdist=\"halfuniform\",cxx =cxx))\nRprof(NULL)\n\ncxx=FALSE\noutfile=\"ash.out\"\nRprof(outfile)\nsystem.time(beta.ash <- ash(ss$betahat, ss$betasd, prior = \"uniform\", mixcompdist=\"halfuniform\", cxx =cxx))\nRprof(NULL)\n\n# check that return identical values (up to machine error)\nall.equal(beta.ash$PosteriorMean, beta.ash.cxx$PosteriorMean)\nall.equal(beta.ash$qvalue, beta.ash.cxx$qvalue)\nall.equal(beta.ash$PositiveProb, beta.ash.cxx$PositiveProb)\n\n",
    "created" : 1393507557059.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2703836936",
    "id" : "4F4D492B",
    "lastKnownWriteTime" : 1393511521,
    "path" : "~/Documents/git/ash/tests/test_cxx/test.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}